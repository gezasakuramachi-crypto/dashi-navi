<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>鹿嶋のご神幸</title>

  <!-- Map / App styles -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <style>
    html, body, #app { height:100%; margin:0; background:#000; color:#fff; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic UI", "Yu Gothic", Meiryo, sans-serif; }
    #map { position:absolute; inset:0; }

    /* ヘッダー（タイトル画像のみ・高さは従来のまま） */
    header.site-header{
      position:fixed; left:0; right:0; top:0; z-index:5;
      height:52px; display:flex; align-items:center; padding:0 12px;
      background:linear-gradient(#000,#000); border-bottom:1px solid rgba(255,255,255,.06);
    }
    header .title-img{ height:36px; width:auto; object-fit:contain; }

    /* 右上：交通規制バッジ（2行） */
    .reg-badge{
      position:fixed; right:12px; top:72px; z-index:6;
      background:#ff2d55; color:#fff; border-radius:999px;
      padding:8px 12px; box-shadow:0 6px 16px rgba(0,0,0,.25);
      line-height:1.05; text-align:center; cursor:pointer; user-select:none;
    }
    .reg-badge .l1{ font-weight:700; font-size:14px; letter-spacing:.08em; }
    .reg-badge .l2{ display:block; margin-top:2px; font-size:12px; font-weight:700; }

    /* 交通規制パネル（位置と見た目は従来どおりを想定） */
    #trafficPanel{
      position:fixed; right:12px; top:120px; z-index:7;
      width:min(320px, 86vw);
      background:#111; color:#fff; border:1px solid rgba(255,255,255,.12);
      border-radius:14px; box-shadow:0 10px 24px rgba(0,0,0,.35);
      display:none;
    }
    #trafficPanel header{ padding:12px 14px; font-weight:700; border-bottom:1px solid rgba(255,255,255,.08); }
    #trafficPanel .body{ padding:12px 14px; }
    /* 中身はお手元のUIが入る想定（ここはダミー文） */

    /* 左の表示/非表示トグル群（既存） */
    .left-rail{ position:fixed; left:12px; top:120px; z-index:6; }

    /* 下段メニュー（既存の4つ） */
    .bottom-bar{
      position:fixed; left:0; right:0; bottom:0; z-index:6;
      background:#000; display:flex; justify-content:space-around; gap:8px;
      padding:10px 10px calc(env(safe-area-inset-bottom) + 10px);
      border-top:1px solid rgba(255,255,255,.08);
    }
    .nav-item{ display:flex; flex-direction:column; align-items:center; gap:4px; color:#fff; text-decoration:none; }
    .nav-item .ico{ width:56px; height:56px; border-radius:50%; background:#1a1a1a; display:grid; place-items:center; }
    .nav-item img{ width:32px; height:32px; object-fit:contain; }
    .nav-item .label{ font-size:12px; font-weight:700; letter-spacing:.06em; }

    @media (min-width:768px){
      .nav-item .ico{ width:60px; height:60px; }
      .nav-item img{ width:34px; height:34px; }
    }
  </style>
</head>
<body>
  <div id="app">
    <div id="map"></div>

    <header class="site-header" aria-label="タイトル">
      <img class="title-img" src="mark/title.png" alt="鹿嶋のご神幸" />
    </header>

    <!-- 右上：交通規制（2行表示） -->
    <button id="regBadge" class="reg-badge" type="button" aria-controls="trafficPanel" aria-expanded="false">
      <span class="l1" id="regBadgeL1">交通規制</span>
      <span class="l2" id="regBadgeL2">自動更新</span>
    </button>

    <!-- 交通規制パネル（中身は既存のUIをここに） -->
    <section id="trafficPanel" role="dialog" aria-label="交通規制メニュー">
      <header>交通規制メニュー</header>
      <div class="body">
        <!-- ※既存の日時選択UIなどをここに描画（app.js側で生成しているならそのままでOK） -->
        <div id="trafficPanelBody"></div>
      </div>
    </section>

    <!-- 左レール（既存の3ボタンなど） -->
    <div class="left-rail" id="leftRail">
      <!-- 既存：info / toilet / parking のボタン群が入っている想定 -->
    </div>

    <!-- 下段メニュー（既存の4つ） -->
    <nav class="bottom-bar" aria-label="主操作">
      <a class="nav-item" id="nav-dashi" href="javascript:void(0)">
        <span class="ico"><img src="mark/sakura.png" alt=""></span>
        <span class="label">山車</span>
      </a>
      <a class="nav-item" id="nav-traffic" href="javascript:void(0)">
        <span class="ico"><img src="mark/no_entry.png" alt=""></span>
        <span class="label">交通規制</span>
      </a>
      <a class="nav-item" id="nav-mypos" href="javascript:void(0)">
        <span class="ico"><img src="mark/mypos.png" alt=""></span>
        <span class="label">現在地</span>
      </a>
      <a class="nav-item" id="nav-help" href="javascript:void(0)">
        <span class="ico"><img src="mark/help.png" alt=""></span>
        <span class="label">ヘルプ</span>
      </a>
    </nav>
  </div>

  <!-- Google Maps JS（従来のロード位置。YOUR_KEY のまま） -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap&libraries=geometry"></script>

  <!-- アプリ本体 -->
  <script src="app.js"></script>
</body>
</html>
